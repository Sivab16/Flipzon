@page "/category/create"

@inject ICategoryRepository _categoryRepository

@inject NavigationManager _navigationManager

<div class="row my-2">
    <h3 class="card-title text-primary mb-3 ml-3">@Title Category</h3>

    <div class="col-12">
        <EditForm Model="Category" OnSubmit="CrudOperations">
            <DataAnnotationsValidator />
            <div class="form-group">
                <label>Name</label>
                <InputText @bind-Value="Category.Name" class="form-control"></InputText>
                <ValidationMessage For="()=>Category.Name"></ValidationMessage>
                <br />
                <label>Description</label>
                <InputText @bind-Value="Category.Description" class="form-control"></InputText>
                <ValidationMessage For="()=>Category.Description"></ValidationMessage>

            </div>
            <br />
            <div class="form-group">
                <button class="btn btn-primary"> @Title</button>
                <NavLink href="category/category" class="btn btn-secondary">Back to Category List</NavLink>
            </div>
        </EditForm>
    </div>


</div>


@code {
    private CategoryDTO Category { get; set; } = new CategoryDTO();

    private string Title { get; set; } = "Create";

    public void CrudOperations()
    {
        Category.CreatedDate = DateTime.Now;
        _categoryRepository.Create(Category);
        _navigationManager.NavigateTo("category/category");
    }

}
